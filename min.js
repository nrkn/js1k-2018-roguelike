G=(()=>{let t=t=>Math.random()*t|0,e=0,l=[],r=[t(10),t(10),0,10,"@"],f=(t,e)=>{for(let l=0;l<t.length;l++)if(t[l][3]&&e[0]==t[l][0]&&e[1]==t[l][1])return t[l]},h=(t,e,l,r)=>{r?t[0]<e[0]?e[0]--:t[0]>e[0]?e[0]++:t[1]<e[1]?e[1]--:t[1]>e[1]&&e[1]++:1==l?e[1]--:2==l?e[0]++:3==l?e[1]++:e[0]--},o=()=>{let o=[[r[0],r[1],3,1,"."]],n=[r],i=t(10*e)+10,u=t(10*e)+10,a=t(2*e)+2,d=t(2*e)+2,w=t(2*e)+2,c=(r,h,o)=>{let n=[t(i),t(u),r,h,o];return f(l[e][0],n)&&!f(l[e][1],n)?(l[e][1].push(n),n):c(r,h,o)},g=(e,l)=>{if(f(o,l)||o.push([l[0],l[1],3,1,"."]),e[0]==l[0]&&e[1]==l[1])return;let r=t(4);h(e,l,r,!t(3)),g(e,l)};for(let e=0;e<a;e++)g(o[t(o.length)],[t(i),t(u)]);l[e]=[o,n],c(2,1,e>8?"$":">");for(let t=0;t<d;t++)c(1,1,"m");for(let t=0;t<w;t++)c(4,1,"¢")},n=()=>{a.width=a.width;for(let t=0;t<25;t++)for(let h=0;h<25;h++){let o=r[0]-12+h,n=r[1]-12+t,i=f(l[e][1],[o,n])||f(l[e][0],[o,n]);i||(l[e][1].push([o,n,5,1,"#"]),i=f(l[e][1],[o,n])),h>=8&&t>=8&&h<17&&t<17&&(i[5]=1),c.fillText(e>9?"$":r[3]<1?0:i[5]?i[4]:" ",10*h,10*t)}r[3]>0&&e<11&&c.fillText(e+1+" ¢"+r[3],0,250)},i=(n,i)=>{let u=[n[0],n[1]];h(r,u,i,1==n[2]&&t(5));let a=f(l[e][1],u);a&&1==n[2]&&0==a[2]&&t(2)?a[3]--:a&&0==n[2]&&1==a[2]&&t(2)?a[3]--:a&&0==n[2]&&2==a[2]?(e++,o()):a&&4==a[2]?(n[3]++,a[3]--):f(l[e][0],u)&&!a&&(n[0]=u[0],n[1]=u[1])};b.onkeydown=(f=>{i(r,f.which-37);for(let r=0;r<l[e][1].length;r++)l[e][1][r][3]&&1==l[e][1][r][2]&&i(l[e][1][r],t(4));n()}),o(),n()}),G()