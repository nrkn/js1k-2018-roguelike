G=(()=>{let t=t=>Math.random()*t|0,e=0,l=[],r=[t(100),t(100),0,10,"@"],f=(t,e)=>{for(let l=0;l<t.length;l++)if(t[l][3]&&e[0]===t[l][0]&&e[1]===t[l][1])return t[l]},h=()=>{let h=[],o=[r],n=t(25*e)+100,i=t(25*e)+100,a=t(25*e)+10,d=(t(25*e),(r,h,o)=>{let a=[t(n),t(i),r,h,o];return f(l[e][0],a)&&!f(l[e][1],a)?(l[e][1].push(a),a):d(r,h,o)}),g=(t,e)=>{for(let l=t[1]<e[1]?t[1]:e[1];l<=(t[1]<e[1]?e[1]:t[1]);l++)for(let r=t[0]<e[0]?t[0]:e[0];r<=(t[0]<e[0]?e[0]:t[0]);r++)h.push([r,l,3,1,"."])},u=(t,e)=>{g([t[0],t[1]],[t[0],e[1]]),g([t[0],e[1]],[e[0],e[1]])};for(let e=0;e<a;e++){let l=0===e?[r[0],r[1]]:[t(n),t(i)];h.length&&u(l,h[t(h.length)]),g([l[0]-(t(15)+1),l[1]-(t(15)+1)],[l[0]+(t(15)+1),l[1]+(t(15)+1)])}l[e]=[h,o],d(2,1,">");for(let t=0;t<10;t++)d(1,1,"m")};h();let o=()=>{a.width=a.width;for(let t=0;t<25;t++)for(let h=0;h<25;h++){let o=r[0]-12+h,n=r[1]-12+t,i=f(l[e][1],[o,n])||f(l[e][0],[o,n]);c.fillText(i?i[4]:"#",10*h,10*t)}c.fillText("L "+e+" HP "+r[3],0,250)},n=(o,n)=>{let i=[o[0],o[1]];1===o[2]&&t(5)?r[0]<o[0]?i[0]--:r[0]>o[0]?i[0]++:r[1]<o[1]?i[1]--:r[1]>o[1]&&i[1]++:38===n?i[1]--:39===n?i[0]++:40===n?i[1]++:37===n&&i[0]--;let a=f(l[e][1],i);a&&1===o[2]&&0===a[2]&&t(2)?a[3]--:a&&0===o[2]&&1===a[2]&&t(2)?a[3]--:a&&2===a[2]?(e++,h()):f(l[e][0],i)&&!a&&(o[0]=i[0],o[1]=i[1])};b.onkeydown=(f=>{n(r,f.which);for(let r=0;r<l[e][1].length;r++)l[e][1][r][3]&&1===l[e][1][r][2]&&n(l[e][1][r],t(4)+37);r[3]>0&&o()}),o()}),G()