G=(()=>{let t=t=>~~(Math.random()*t),e=()=>[t(100),t(100)],l=((l,r,f,h,o)=>{let n=[],i=(t,e)=>{for(let l=t[1]<e[1]?t[1]:e[1];l<=(t[1]<e[1]?e[1]:t[1]);l++)for(let r=t[0]<e[0]?t[0]:e[0];r<=(t[0]<e[0]?e[0]:t[0]);r++)n.push([r,l,3,1,"."])},u=(t,e)=>{i([t[0],t[1]],[t[0],e[1]]),i([t[0],e[1]],[e[0],e[1]])};for(let l=0;l<10;l++){let l=e();n.length&&u(l,n[t(n.length)]),i([l[0]-(t(15)+1),l[1]-(t(15)+1)],[l[0]+(t(15)+1),l[1]+(t(15)+1)])}return n})(),r=[],f=(t,e)=>{for(let l=0;l<t.length;l++)if(t[l][3]&&e[0]===t[l][0]&&e[1]===t[l][1])return t[l]},h=(t,o,n)=>{let i=e();return f(l,i)&&!f(r,i)?(i[2]=t,i[3]=o,i[4]=n,r.push(i),i):h(t,o,n)},o=h(0,10,"@");h(2,1,">");for(let t=0;t<10;t++)h(1,1,"m");let n=()=>{a.width=a.width;for(let t=0;t<25;t++)for(let e=0;e<25;e++){let h=o[0]-12+e,n=o[1]-12+t,i=f(r,[h,n])||f(l,[h,n]);c.fillText(i?i[4]:"#",10*e,10*t)}c.fillText("HP "+o[3],0,250)},i=(e,h)=>{let n=[e[0],e[1]];1===e[2]&&t(5)?o[0]<e[0]?n[0]--:o[0]>e[0]?n[0]++:o[1]<e[1]?n[1]--:o[1]>e[1]&&n[1]++:38===h?n[1]--:39===h?n[0]++:40===h?n[1]++:37===h&&n[0]--;let i=f(r,n);i&&1===e[2]&&0===i[2]&&t(2)?i[3]--:i&&0===e[2]&&1===i[2]&&t(2)?i[3]--:f(l,n)&&!i&&(e[0]=n[0],e[1]=n[1])};b.onkeydown=(e=>{i(o,e.which);for(let e=0;e<r.length;e++)r[e][3]&&1===r[e][2]&&i(r[e],t(4)+37);o[3]>0&&n()}),n()}),G()